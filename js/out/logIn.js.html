<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: logIn.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: logIn.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>let checked = true;
let rememberedEmail = "join-tester@havefun.com"
let rememberedPassword = "123"

/**
 * Redirects the user to the sign-up page by navigating to "signup.html".
 */
function openSignUp() {
  window.location.href = "signup.html";
}

/**
 * Toggles the "Remember Me" option. Updates the icon to reflect the current state 
 * (checked/unchecked) and manages localStorage accordingly to remember or forget
 * the user's email and password.
 */
function checkRemember() {
  let remember = document.getElementById("remember");
  if (checked) {
    checked = false;
    remember.innerHTML = '&lt;img src="./img/Property 1=Default.svg" alt=""/>';
    localStorage.removeItem("rememberedEmail");
    localStorage.removeItem("rememberedPassword");
  } else {
    checked = true;
    remember.innerHTML = '&lt;img src="./img/Property 1=checked.svg" alt=""/>';
  }
  localStorage.setItem("rememberMe", JSON.stringify(checked));
}

/**
 * Loads the current status of the "Remember Me" option from localStorage and updates 
 * the UI accordingly. Also calls `loadLocalRememberdUser()` to load saved user credentials.
 */
function loadRememberStatus() {
  let checkedAsText = localStorage.getItem("rememberMe");
  if (checkedAsText) {
    checked = JSON.parse(checkedAsText);
  }
  let remember = document.getElementById("remember");
  if (!checked) {
    remember.innerHTML = '&lt;img src="./img/Property 1=Default.svg" alt=""/>';
  } else {
    remember.innerHTML = '&lt;img src="./img/Property 1=checked.svg" alt=""/>';
  }
  loadLocalRememberdUser();
}

/**
 * Loads saved email and password from localStorage if the "Remember Me" option was used,
 * and then calls `getRemeberdUser()` to populate the login fields.
 */
function loadLocalRememberdUser() {
  let rememberedEmailAsText = localStorage.getItem("rememberedEmail");
  let rememberedPasswordAsText = localStorage.getItem("rememberedPassword");
  if (rememberedEmailAsText &amp;&amp; rememberedPasswordAsText) {
    rememberedEmail = JSON.parse(rememberedEmailAsText);
    rememberedPassword = JSON.parse(rememberedPasswordAsText);
  }
  getRemeberdUser();
}

/**
 * Populates the email and password input fields with the remembered credentials 
 * if the "Remember Me" option is active. Otherwise, clears the fields.
 */
function getRemeberdUser() {
  let emailValue = document.getElementById("emailLogIn");
  let passwordValue = document.getElementById("passwordLogIn");
  if (checked) {
    emailValue.value = rememberedEmail;
    passwordValue.value = rememberedPassword;
  } else {
    emailValue.value = '';
    passwordValue.value = '';
  }
}

/**
 * Changes the visibility icon for the password field depending on whether the 
 * password input has content or not. Enables or disables the "show password" button accordingly.
 */
function changeImagePw() {
  let input = document.getElementById("passwordLogIn");
  let img = document.getElementById("showPw");
  if (input.value != "") {
    img.src = "./img/visibility_off.svg";
    document.getElementById("btnShowPwLogIn").disabled = false;
  } else {
    img.src = "./img/lock.svg";
    document.getElementById("btnShowPwLogIn").disabled = true;
  }
}

/**
 * Toggles the visibility of the password field between plain text and hidden.
 * Also updates the visibility icon accordingly.
 */
function showPassword() {
  let passwordField = document.getElementById("passwordLogIn");
  let visibilityImage = document.getElementById("showPw");
  if (passwordField.type === "password") {
    passwordField.type = "text";
    visibilityImage.src = "./img/visibility.svg";
  } else {
    passwordField.type = "password";
    visibilityImage.src = "./img/visibility_off.svg";
  }
}

/**
 * Validates the email input field. Ensures the field is not empty and contains 
 * a valid email format (with an '@' sign). Displays appropriate error messages if invalid.
 */
function requiredInput() {
  let emailInput = document.getElementById("emailLogIn");
  let requiredEmail = document.getElementById("requiredEmail");
  if (emailInput.value === "") {
    requiredEmail.innerHTML = "This field is required";
    emailInput.parentNode.classList.add("required-border");
  } else if (!emailInput.value.includes("@")) {
    requiredEmail.innerHTML = `'${emailInput.value}' is not valid. Please use an @-sign`;
    emailInput.parentNode.classList.add("required-border");
  } else {
    requiredEmail.innerHTML = "";
    emailInput.parentNode.classList.remove("required-border");
  }
  requiredPasswordInput(emailInput);
}

/**
 * Validates the password input field. Ensures the field is not empty. If valid,
 * it proceeds to check the user credentials via `checkUserInput()`.
 * 
 * @param {HTMLElement} emailInput - The email input field element.
 */
function requiredPasswordInput(emailInput) {
  let passwordInput = document.getElementById("passwordLogIn");
  let requiredPassword = document.getElementById("requiredPassword");
  if (passwordInput.value != "") {
    requiredPassword.innerHTML = "";
    passwordInput.parentNode.classList.remove("required-border");
    checkUserInput(emailInput, passwordInput, requiredPassword);
  } else {
    requiredPassword.innerHTML = "This field is required";
    passwordInput.parentNode.classList.add("required-border");
  }
}

/**
 * Checks if the provided email and password match any user in the database.
 * If a match is found, the user's information is saved locally, otherwise an 
 * error message is shown.
 * 
 * @param {HTMLElement} rightEmail - The email input field element.
 * @param {HTMLElement} passwordInput - The password input field element.
 * @param {HTMLElement} wrongInput - The element to display an error message if login fails.
 */
async function checkUserInput(rightEmail, passwordInput, wrongInput) {
  let response = await fetch(BASE_URL + "id" + ".json");
  let responseToJson = await response.json();
  let userFound = false;
  Object.keys(responseToJson).forEach((key) => {
    if (responseToJson[key].email === rightEmail.value &amp;&amp; responseToJson[key].password === passwordInput.value) {
      userName = responseToJson[key].name;
      userEmail = responseToJson[key].email;
      userId = key;
      userFound = true;
      saveLocalRemember();
    }
  });
  if (!userFound) {
    wrongInput.innerHTML = "Ups! Wrong email or password. Try again";
  }
}

/**
 * Logs in the user as a guest. Sets the userName and userId as "guest",
 * and calls `setuserName()` to reflect this.
 */
function guestLogIn() {
  userName = "guest";
  userId = "guest";
  userEmail = "guestuser@join.de"
  setuserName();
}

/**
 * Saves the user's email and password to localStorage if the "Remember Me" option 
 * is enabled. If the option is not enabled, the credentials are cleared from localStorage.
 */
function saveLocalRemember() {
  if (checked) {
    rememberedEmail = document.getElementById("emailLogIn").value;
    rememberedPassword = document.getElementById("passwordLogIn").value;
  } else {
    rememberedEmail = "";
    rememberedPassword = "";
  }
  localStorage.setItem("rememberedEmail", JSON.stringify(rememberedEmail));
  localStorage.setItem("rememberedPassword", JSON.stringify(rememberedPassword));
  setuserName();
}
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Global</h3><ul><li><a href="global.html#ContactListHtml">ContactListHtml</a></li><li><a href="global.html#abord">abord</a></li><li><a href="global.html#addContactsassign">addContactsassign</a></li><li><a href="global.html#addGuestTask">addGuestTask</a></li><li><a href="global.html#addHighlight">addHighlight</a></li><li><a href="global.html#addUserToDatabase">addUserToDatabase</a></li><li><a href="global.html#allowDrop">allowDrop</a></li><li><a href="global.html#cancelEdit">cancelEdit</a></li><li><a href="global.html#cardContacts">cardContacts</a></li><li><a href="global.html#cardContentHtml">cardContentHtml</a></li><li><a href="global.html#changeCardContent">changeCardContent</a></li><li><a href="global.html#changeCheckedSub">changeCheckedSub</a></li><li><a href="global.html#changeContentDrop">changeContentDrop</a></li><li><a href="global.html#changeContentLeave">changeContentLeave</a></li><li><a href="global.html#changeGuestCheckedSub">changeGuestCheckedSub</a></li><li><a href="global.html#changeGuestTaskStatus">changeGuestTaskStatus</a></li><li><a href="global.html#changeImagePassword">changeImagePassword</a></li><li><a href="global.html#changeImagePw">changeImagePw</a></li><li><a href="global.html#changeImagePwConfirmed">changeImagePwConfirmed</a></li><li><a href="global.html#changeImagePwSignedIn">changeImagePwSignedIn</a></li><li><a href="global.html#changePrio">changePrio</a></li><li><a href="global.html#changeStatus">changeStatus</a></li><li><a href="global.html#checkAccept">checkAccept</a></li><li><a href="global.html#checkAmount">checkAmount</a></li><li><a href="global.html#checkBoardDatabase">checkBoardDatabase</a></li><li><a href="global.html#checkBoxChecked">checkBoxChecked</a></li><li><a href="global.html#checkConfirmed">checkConfirmed</a></li><li><a href="global.html#checkContact">checkContact</a></li><li><a href="global.html#checkContactDatabase">checkContactDatabase</a></li><li><a href="global.html#checkRemember">checkRemember</a></li><li><a href="global.html#checkUserInput">checkUserInput</a></li><li><a href="global.html#clearForm">clearForm</a></li><li><a href="global.html#clearTasks">clearTasks</a></li><li><a href="global.html#closeBoardPopup">closeBoardPopup</a></li><li><a href="global.html#closeContactList">closeContactList</a></li><li><a href="global.html#closeContactsList">closeContactsList</a></li><li><a href="global.html#closeDetailCard">closeDetailCard</a></li><li><a href="global.html#closeDetails">closeDetails</a></li><li><a href="global.html#closeEditField">closeEditField</a></li><li><a href="global.html#comparePasswords">comparePasswords</a></li><li><a href="global.html#confirmedPasswordSignUp">confirmedPasswordSignUp</a></li><li><a href="global.html#contactClear">contactClear</a></li><li><a href="global.html#craeteContactList">craeteContactList</a></li><li><a href="global.html#createCurrentContacts">createCurrentContacts</a></li><li><a href="global.html#createGuestTaskContents">createGuestTaskContents</a></li><li><a href="global.html#createNewTask">createNewTask</a></li><li><a href="global.html#createSubtask">createSubtask</a></li><li><a href="global.html#createTaskContents">createTaskContents</a></li><li><a href="global.html#dataDueDate">dataDueDate</a></li><li><a href="global.html#dataTitle">dataTitle</a></li><li><a href="global.html#deadlineAlert">deadlineAlert</a></li><li><a href="global.html#deleteCard">deleteCard</a></li><li><a href="global.html#deleteCardSubtask">deleteCardSubtask</a></li><li><a href="global.html#deleteContact">deleteContact</a></li><li><a href="global.html#deleteGuestCard">deleteGuestCard</a></li><li><a href="global.html#deleteSubtask">deleteSubtask</a></li><li><a href="global.html#drag">drag</a></li><li><a href="global.html#drop">drop</a></li><li><a href="global.html#editCardHtml">editCardHtml</a></li><li><a href="global.html#editCardSubtasks">editCardSubtasks</a></li><li><a href="global.html#editDetailCard">editDetailCard</a></li><li><a href="global.html#editSubtask">editSubtask</a></li><li><a href="global.html#editSubtaskHtml">editSubtaskHtml</a></li><li><a href="global.html#editedSubtask">editedSubtask</a></li><li><a href="global.html#empteySearchMsg">empteySearchMsg</a></li><li><a href="global.html#filterTask">filterTask</a></li><li><a href="global.html#generateRandomId">generateRandomId</a></li><li><a href="global.html#generateRandomString">generateRandomString</a></li><li><a href="global.html#getChosenNamesContacts">getChosenNamesContacts</a></li><li><a href="global.html#getCurrentContact">getCurrentContact</a></li><li><a href="global.html#getCurrentDate">getCurrentDate</a></li><li><a href="global.html#getCurrentSubtasks">getCurrentSubtasks</a></li><li><a href="global.html#getDayTime">getDayTime</a></li><li><a href="global.html#getDeadline">getDeadline</a></li><li><a href="global.html#getFirstLetter">getFirstLetter</a></li><li><a href="global.html#getFormatDate">getFormatDate</a></li><li><a href="global.html#getLowestDate">getLowestDate</a></li><li><a href="global.html#getPrioDetailCard">getPrioDetailCard</a></li><li><a href="global.html#getRemeberdUser">getRemeberdUser</a></li><li><a href="global.html#getShortcut">getShortcut</a></li><li><a href="global.html#getSubtasksCard">getSubtasksCard</a></li><li><a href="global.html#getUnderline">getUnderline</a></li><li><a href="global.html#getUserBoard">getUserBoard</a></li><li><a href="global.html#getprio">getprio</a></li><li><a href="global.html#greetUser">greetUser</a></li><li><a href="global.html#greetingHTML">greetingHTML</a></li><li><a href="global.html#guestLogIn">guestLogIn</a></li><li><a href="global.html#hideEditMenu">hideEditMenu</a></li><li><a href="global.html#loadContacts">loadContacts</a></li><li><a href="global.html#loadGuestSummary">loadGuestSummary</a></li><li><a href="global.html#loadLocalRememberdUser">loadLocalRememberdUser</a></li><li><a href="global.html#loadRememberStatus">loadRememberStatus</a></li><li><a href="global.html#loadSuptaskStatus">loadSuptaskStatus</a></li><li><a href="global.html#loadTasks">loadTasks</a></li><li><a href="global.html#loadTasksGuest">loadTasksGuest</a></li><li><a href="global.html#loadUser">loadUser</a></li><li><a href="global.html#markChosenContact">markChosenContact</a></li><li><a href="global.html#markCurrentChosenContacts">markCurrentChosenContacts</a></li><li><a href="global.html#openAddTask">openAddTask</a></li><li><a href="global.html#openBoard">openBoard</a></li><li><a href="global.html#openBoardPopup">openBoardPopup</a></li><li><a href="global.html#openContactList">openContactList</a></li><li><a href="global.html#openEditContact">openEditContact</a></li><li><a href="global.html#openIndex">openIndex</a></li><li><a href="global.html#openSignUp">openSignUp</a></li><li><a href="global.html#postData">postData</a></li><li><a href="global.html#prepareContactMode">prepareContactMode</a></li><li><a href="global.html#prepareEditMode">prepareEditMode</a></li><li><a href="global.html#prepareEditSubtask">prepareEditSubtask</a></li><li><a href="global.html#prepareWithEnter">prepareWithEnter</a></li><li><a href="global.html#putToBoardDatabase">putToBoardDatabase</a></li><li><a href="global.html#randomColor">randomColor</a></li><li><a href="global.html#removeHighlight">removeHighlight</a></li><li><a href="global.html#renderSubtasks">renderSubtasks</a></li><li><a href="global.html#requiredContactEmail">requiredContactEmail</a></li><li><a href="global.html#requiredContactName">requiredContactName</a></li><li><a href="global.html#requiredContactPhone">requiredContactPhone</a></li><li><a href="global.html#requiredEmail">requiredEmail</a></li><li><a href="global.html#requiredInput">requiredInput</a></li><li><a href="global.html#requiredName">requiredName</a></li><li><a href="global.html#requiredPasswordInput">requiredPasswordInput</a></li><li><a href="global.html#requiredPasswordSignUP">requiredPasswordSignUP</a></li><li><a href="global.html#saveContact">saveContact</a></li><li><a href="global.html#saveDemoBoard">saveDemoBoard</a></li><li><a href="global.html#saveDemoContacts">saveDemoContacts</a></li><li><a href="global.html#saveDropLocal">saveDropLocal</a></li><li><a href="global.html#saveGuestData">saveGuestData</a></li><li><a href="global.html#saveLocalRemember">saveLocalRemember</a></li><li><a href="global.html#savePreparedSubtask">savePreparedSubtask</a></li><li><a href="global.html#saveTaskDrop">saveTaskDrop</a></li><li><a href="global.html#searchContact">searchContact</a></li><li><a href="global.html#searchEditContact">searchEditContact</a></li><li><a href="global.html#searchInBoard">searchInBoard</a></li><li><a href="global.html#searchInputField">searchInputField</a></li><li><a href="global.html#selectCategory">selectCategory</a></li><li><a href="global.html#selectField">selectField</a></li><li><a href="global.html#selectName">selectName</a></li><li><a href="global.html#selectcategory">selectcategory</a></li><li><a href="global.html#setCurrentTask">setCurrentTask</a></li><li><a href="global.html#setuserName">setuserName</a></li><li><a href="global.html#showAssignedContacts">showAssignedContacts</a></li><li><a href="global.html#showCardSubtasksHtml">showCardSubtasksHtml</a></li><li><a href="global.html#showChosenCardContactHtml">showChosenCardContactHtml</a></li><li><a href="global.html#showChosenEditContacts">showChosenEditContacts</a></li><li><a href="global.html#showConfirmedPassword">showConfirmedPassword</a></li><li><a href="global.html#showContactButtonHtml">showContactButtonHtml</a></li><li><a href="global.html#showContactList">showContactList</a></li><li><a href="global.html#showDetailCard">showDetailCard</a></li><li><a href="global.html#showDetailCardHtml">showDetailCardHtml</a></li><li><a href="global.html#showDetailContact">showDetailContact</a></li><li><a href="global.html#showDetialInformationHtml">showDetialInformationHtml</a></li><li><a href="global.html#showEditHtml">showEditHtml</a></li><li><a href="global.html#showEditMenu">showEditMenu</a></li><li><a href="global.html#showEditSubtasks">showEditSubtasks</a></li><li><a href="global.html#showPassword">showPassword</a></li><li><a href="global.html#showRequires">showRequires</a></li><li><a href="global.html#showSignedUpPassword">showSignedUpPassword</a></li><li><a href="global.html#showSummaryHtml">showSummaryHtml</a></li><li><a href="global.html#showSummaryUser">showSummaryUser</a></li><li><a href="global.html#showTasks">showTasks</a></li><li><a href="global.html#sortContacts">sortContacts</a></li><li><a href="global.html#stopPropagation">stopPropagation</a></li><li><a href="global.html#submitSubtaskWithEnter">submitSubtaskWithEnter</a></li><li><a href="global.html#submitWithEnter">submitWithEnter</a></li><li><a href="global.html#succesEditMessage">succesEditMessage</a></li><li><a href="global.html#taskPrioUrgent">taskPrioUrgent</a></li><li><a href="global.html#toggleContactList">toggleContactList</a></li><li><a href="global.html#togglePasswordVisibility">togglePasswordVisibility</a></li><li><a href="global.html#translateDatas">translateDatas</a></li><li><a href="global.html#unselectField">unselectField</a></li><li><a href="global.html#updateContactDetails">updateContactDetails</a></li><li><a href="global.html#userAsContact">userAsContact</a></li><li><a href="global.html#userAsContactFirst">userAsContactFirst</a></li><li><a href="global.html#writeSubtask">writeSubtask</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 4.0.3</a> on Mon Sep 23 2024 07:04:19 GMT+0200 (Mitteleuropäische Sommerzeit)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
